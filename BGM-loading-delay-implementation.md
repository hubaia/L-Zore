# L-Zore BGMå»¶è¿Ÿæ’­æ”¾å®ç°è¯´æ˜

## ğŸµ å®ç°èƒŒæ™¯
ç”¨æˆ·è¦æ±‚BGMåº”è¯¥åœ¨loadingé¡µé¢åŠ è½½å®Œæ¯•åæ‰å¼€å§‹æ’­æ”¾ï¼Œè€Œä¸æ˜¯æ¸¸æˆå¼€å§‹æ—¶ç«‹å³æ’­æ”¾ã€‚

## ğŸ”„ ä¿®æ”¹æµç¨‹

### 1. **AudioManageråˆå§‹åŒ–è°ƒæ•´**
- **ä¿®æ”¹å‰**: åˆå§‹åŒ–å®Œæˆåç«‹å³è‡ªåŠ¨æ’­æ”¾BGM
- **ä¿®æ”¹å**: åˆå§‹åŒ–å®Œæˆåç­‰å¾…ï¼Œæ·»åŠ æç¤º"BGMå°†åœ¨loadingå®Œæˆåæ’­æ”¾"

### 2. **æ¸¸æˆåœºæ™¯è°ƒæ•´**
- **ä¿®æ”¹å‰**: åœ¨`create()`æ–¹æ³•æœ€åè°ƒç”¨`autoStartBackgroundMusic()`
- **ä¿®æ”¹å**: ç§»é™¤è‡ªåŠ¨æ’­æ”¾è°ƒç”¨ï¼Œä»…åœ¨`gameReady`äº‹ä»¶ä¸­æ ‡è®°å‡†å¤‡å®Œæˆ

### 3. **Reactç»„ä»¶Loadingå®Œæˆè§¦å‘**
- **å…³é”®é€»è¾‘**: åœ¨`LZorePhaserGame.tsx`çš„`gameReady`äº‹ä»¶å¤„ç†ä¸­
- **è§¦å‘æ—¶æœº**: `setIsLoading(false)`ä¹‹å‰
- **å®ç°æ–¹å¼**: é€šè¿‡sceneå¼•ç”¨è°ƒç”¨`audioManager.autoStartBackgroundMusic()`

## ğŸ¯ æ–°çš„æ’­æ”¾æ—¶åº

### ğŸ“Š Loadingè¿›åº¦ä¸BGMæ’­æ”¾
```
0% - 20%   ğŸ® æ¸¸æˆå¼•æ“åˆå§‹åŒ–
20% - 50%  ğŸµ éŸ³é¢‘ç³»ç»Ÿå‡†å¤‡ï¼ˆä¸æ’­æ”¾ï¼‰
50% - 90%  ğŸ¨ å¡ç‰Œèµ„æºåŠ è½½
90% - 99%  âš¡ æ¸¸æˆç³»ç»Ÿå¯åŠ¨
99% - 100% âœ… å‘é€gameReadyäº‹ä»¶
100%       ğŸ¶ Loadingç•Œé¢æ¶ˆå¤± + BGMå¼€å§‹æ’­æ”¾
```

### ğŸ• ç²¾ç¡®æ—¶é—´æ§åˆ¶
1. **99%**: æ¸¸æˆç³»ç»Ÿå®Œå…¨å°±ç»ªï¼Œå‘é€`gameReady`äº‹ä»¶
2. **100%**: Loadingè¿›åº¦è¾¾åˆ°100%ï¼Œæ˜¾ç¤º"æ¸¸æˆå‡†å¤‡å®Œæˆï¼"
3. **+500ms**: Loadingç•Œé¢æ·¡å‡º + BGMè‡ªåŠ¨æ’­æ”¾å¼€å§‹
4. **å®Œæˆ**: ç”¨æˆ·çœ‹åˆ°æ¸¸æˆç•Œé¢ï¼ŒBGMå·²ç»åœ¨æ’­æ”¾

## ğŸ”§ æŠ€æœ¯å®ç°

### AudioManagerä¿®æ”¹
```typescript
// ç§»é™¤createé˜¶æ®µçš„è‡ªåŠ¨æ’­æ”¾
await this.initSFXSystem();
console.log('ğŸµ AudioManager: åˆå§‹åŒ–å®Œæˆï¼ŒBGMå°†åœ¨loadingå®Œæˆåæ’­æ”¾');
```

### æ¸¸æˆåœºæ™¯ä¿®æ”¹  
```typescript
// ä¸å†åœ¨createé˜¶æ®µæ’­æ”¾BGM
console.log('âœ… æ¸¸æˆåˆ›å»ºå®Œæˆï¼ç­‰å¾…loadingç•Œé¢å®Œæˆåæ’­æ”¾BGM');
this.events.emit('gameReady');
```

### Reactç»„ä»¶æ–°é€»è¾‘
```typescript
setTimeout(() => {
    setIsLoading(false);
    
    // loadingå®Œæˆåå¼€å§‹æ’­æ”¾BGM
    const audioManager = (scene as any).audioManager;
    if (audioManager?.autoStartBackgroundMusic) {
        audioManager.autoStartBackgroundMusic();
        console.log('âœ… BGMå·²åœ¨loadingå®Œæˆåå¯åŠ¨');
    }
}, 500);
```

## ğŸ® ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### Loadingç•Œé¢æç¤ºæ›´æ–°
- **è¿›åº¦ < 50%**: "ğŸµ å‡†å¤‡èƒŒæ™¯éŸ³ä¹"
- **è¿›åº¦ 50-90%**: "ğŸ¨ åŠ è½½ç¥ç…å¡ç‰Œ" 
- **è¿›åº¦ 90-100%**: "âš¡ åˆå§‹åŒ–æˆ˜æ–—ç³»ç»Ÿ"
- **è¿›åº¦ = 100%**: "ğŸ¶ å‡†å¤‡æ’­æ”¾èƒŒæ™¯éŸ³ä¹"

### éŸ³é¢‘ä½“éªŒæ”¹å–„
âœ… **å®Œç¾æ—¶æœº**: BGMåœ¨loadingå®Œæˆçš„ç¬é—´å¼€å§‹æ’­æ”¾  
âœ… **ç”¨æˆ·å‹å¥½**: ä¸ä¼šåœ¨loadingæœŸé—´æ‰“æ‰°ç”¨æˆ·  
âœ… **æ²‰æµ¸æ„Ÿå¼º**: loadingç»“æŸç«‹å³è¿›å…¥æ¸¸æˆæ°›å›´  
âœ… **ä½“éªŒæµç•…**: æ— ç¼ä»é™é»˜åŠ è½½è½¬å…¥èƒŒæ™¯éŸ³ä¹  

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### ğŸµ æ’­æ”¾æ—¶åºæ§åˆ¶
- **Loadingé˜¶æ®µ**: å®Œå…¨é™é»˜ï¼Œä¸“æ³¨äºåŠ è½½è¿›åº¦
- **å®Œæˆç¬é—´**: BGMè‡ªç„¶å“èµ·ï¼Œè¥é€ æ¸¸æˆæ°›å›´
- **ç”¨æˆ·æ„ŸçŸ¥**: "æ¸¸æˆåŠ è½½å®Œäº†ï¼ŒéŸ³ä¹å¼€å§‹äº†ï¼Œå¯ä»¥å¼€å§‹ç©äº†"

### ğŸ”Š éŸ³é¢‘å±‚æ¬¡ä½“éªŒ
1. **é™é»˜åŠ è½½**: 0-100% loadingæœŸé—´æ— å£°
2. **BGMå¯åŠ¨**: loadingå®Œæˆç¬é—´éŸ³ä¹å“èµ·ï¼ˆ10%éŸ³é‡ï¼‰
3. **å°è¯æ’­æ”¾**: ç¥ç…å…¥åœºå°è¯ï¼ˆ100%éŸ³é‡ï¼‰æœ€ä¸ºçªå‡º
4. **å®Œç¾å¹³è¡¡**: BGMä¸ºæ°›å›´ï¼Œå°è¯ä¸ºä¸»è§’

ç°åœ¨BGMå°†åœ¨å®Œç¾çš„æ—¶æœºå¼€å§‹æ’­æ”¾ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ è‡ªç„¶æµç•…çš„æ¸¸æˆä½“éªŒï¼ğŸ®âœ¨ 